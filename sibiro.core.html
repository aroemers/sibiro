<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>sibiro.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Sibiro</span> <span class="project-version">0.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sibiro</span></div></div></li><li class="depth-2 branch current"><a href="sibiro.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="sibiro.extras.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>extras</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="sibiro.core.html#var-compile-routes"><div class="inner"><span>compile-routes</span></div></a></li><li class="depth-1"><a href="sibiro.core.html#var-match-uri"><div class="inner"><span>match-uri</span></div></a></li><li class="depth-1"><a href="sibiro.core.html#var-uri-for"><div class="inner"><span>uri-for</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">sibiro.core</h1><div class="doc"><pre class="plaintext">Simple data-driven request routing for Clojure and ClojureScript.
</pre></div><div class="public anchor" id="var-compile-routes"><h3>compile-routes</h3><div class="usage"><code>(compile-routes routes &amp; {:as opts})</code></div><div class="doc"><pre class="plaintext">Compiles a routes datastructure for use in `match-uri` and
`uri-for`. Routes is a sequence of sequences (e.g. a vector of
vectors) containing 3 or 4 elements: a method keyword (or :any), a
clout-like path, a result object (can be a handler), and optionally
a tag. For example:

[[:get  "/admin/user/" user-list]
 [:get  "/admin/user/:id" user-get :user-page]
 [:post "/admin/user/:id" user-update]
 [:any  "/:*" handle-404]]

The order in which the routes are specified does not matter. Longer
routes always take precedence, exact uri parts take precedence over
route parameters, catch-all (:*) is tried last, and specific request
methods take precedence over :any.

Compiling takes some opional keyword arguments:

 :uri-for-tagged-only? - When set to true, only tagged routes are
   compiled for use with `uri-for` and can only be found by their
   tag. Defaults to false.

The routes are compiled into a tree structure, for fast matching.
Functions for creating URIs (`uri-for`) are also precompiled for
every route.</pre></div></div><div class="public anchor" id="var-match-uri"><h3>match-uri</h3><div class="usage"><code>(match-uri compiled uri request-method)</code></div><div class="doc"><pre class="plaintext">Given compiled routes, an URI and a request-method, returns
{:route-handler handler, :route-params {...} for a match, or nil.
For example:

(match-uri (compile-routes [[:post "/admin/user/:id" :update-user]])
           "/admin/user/42" :post)
;=&gt; {:route-handler :update-user, :route-params {:id "42"}

The values in :route-params are URL decoded for you.</pre></div></div><div class="public anchor" id="var-uri-for"><h3>uri-for</h3><div class="usage"><code>(uri-for compiled handler)</code><code>(uri-for compiled tag)</code></div><div class="doc"><pre class="plaintext">Given compiled routes and a handler (or tag), and optionally
parameters, returns {:uri "...", :query-string "?..."}. For
example:

(uri-for (compile-routes [[:post "/admin/user/:id" :update-user]])
         :update-user {:id 42 :name "alice"})
;=&gt; {:uri "/admin/user/42", :query-string "?name=alice"}

An exception is thrown if parameters for the URI are missing in the
data map. The values in the data map are URL encoded for you.</pre></div></div></div></body></html>